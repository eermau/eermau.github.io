<html lang="fi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../../style/css/style.css">
    
    <title>Demo 5</title>
</head>

<body>
    <div class="wrapper">
        <header>
            <h1>Sähköisten asiointipalveluiden toteuttaminen</h1>
        </header>
        <div id="container">

            <div id="main" role="main">
                
                <article class="markdown-body">




                    <h2>Demo 5, palautussivu</h2>
                    <p>
                        Laadi tiedosto index.php, joka näyttää linkkilistan demoista ja harjoituksista. Kun klikkaa
                        linkkiä, se avaa samalle sivulle näkyviin sekä työn että sen lähdekoodin.</p>

                    <ol>
                        <li>Tee php-kansiosi alle kansio demot ja kansio harjoitukset</li>
                        <li>Siirrä ensimmäiset demot kansioon demot ja nimeä ne oikein (demo1.php, demo2.php jne)</li>
                        <li>Siirrä ensimmäiset harjoitukset harjoituset-kansioon ja nimeä ne oikein (harj1.php,
                            harj2.php jne)</li>
                        <li>Tee kansio partials, tänne tallennamme tiedostot alku.php, navi.php ja loppu.php</li>
                    </ol>

                    <p>Lisää kaikki tekemäsi tiedostot palautussivulle.
                    <p>

                    </p> Huom! Lomakkeen action on oltava muodossa index.php?sivu=lomakkeenkasittelija, jos käytät
                    sisällyttämistä käyttävää palautussivustoa.</p>

                    <h4>alku.php</h4>
                    <pre>
&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title>PHP-harjoitukset&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
</pre>

                    <h4>loppu.php</h4>
                    <pre>
&lt;/body&gt;
&lt;/html&gt;
</pre>


                    <h4>index.php</h4>
                    <pre>
&lt;?php
include "./partials/alku.php";
include "./partials/navi.php";

/*******************
Tähän väliin sijoitetaan ohjelmakoodi, joka lukee pyynnön mukaisen 
sisällytettävän tiedoston, tarkistaa, että sen saa sisällyttää, 
tulostaa työn ja samalla lähdekoodin ruudulle.
********************/

include "./partials/loppu.php";
?&gt;
</pre>


                    <h4>navi.php</h4>
                    <pre>
&lt;h2&gt;Demot&lt;/h2&gt;
&lt;ul&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="./index.php?sivu=demo1&amp;kansio=demot"&gt;Demo&nbsp;1&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="./index.php?sivu=demo2&amp;kansio=demot"&gt;Demo&nbsp;2&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="./index.php?sivu=demo4&amp;kansio=demot"&gt;Demo&nbsp;4&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="./index.php?sivu=demo5&amp;kansio=demot"&gt;Demo&nbsp;5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Harjoitukset&lt;/h2&gt;
&lt;ul&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="./index.php?sivu=harj1&amp;kansio=harj"&gt;Harjoitus&nbsp;1&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="./index.php?sivu=harj2&amp;kansio=harj"&gt;Harjoitus&nbsp;2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
</pre>


                    <h4>Toiminta</h4>

                    <p>Toiminta index.php-sivulla tapahtuu seuraavalla tavalla. Tarkistetaan sivu ja kansio
                        $_GET-muuttujasta, varmistetaan että sivu löytyy sallituista sivuista ja tämän jälkeen avataan
                        php-sivu näkyviin. highlight_file-funktion avulla saadaan näppärästi näkyviin lähdekoodi.</p>

                    <pre>
if(isset($_GET["sivu"])) $sivu = htmlentities($_GET["sivu"]);
else $sivu = "demo1"; //oletusarvo, jos ei pyyntöä

if(isset($_GET["kansio"])) $kansio = htmlentities($_GET["kansio"]);
else $kansio = "demot";

$sallitut = array("demo1","demo2","demo3","demo4",
"demo4_lomakkeenkasittelija","demo6","demo7","demo8",
"demo9","demo10","demo11","demo12","demo13", "harj1","harj2",
"harj3","harj4","harj5","harj6","harj7","harj8","harj9",
"harj10","harj11","harj12","harj13","harj14","harj15");

if(in_array($sivu,$sallitut)) {
    $polku = "./$kansio/$sivu.php";
    require $polku;
    echo "&lt;h3&gt;Lähdekoodi&lt;/h3&gt;";
    echo highlight_file($polku,1);
}
</pre>


                </article>
            </div>
        </div>
    </div>
    <div class="current-section">
        kevät 2023
      </div>
</body>

</html>