<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="../../style/css/style.css">
  <link rel="stylesheet" href="../../style/css/bootstrap.min.css">
  <title>Demo 10: PDO</title>
</head>

<body>
  <div class="wrapper">
    <header>
      <h1>Sähköisten asiointipalveluiden toteuttaminen</h1><a class="titlelink" href="../index.html">Etusivulle</a>
    </header>
    <div id="container">

      <div id="main" role="main">
        <div class="download-bar">
          <div class="inner">

            <a href="https://github.com/eermau/eermau.github.io" class="code">View eermau.github.io on
              GitHub</a>
          </div>
          <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">

          <h2>Demo 10</h2>
          <p>PDO: tietokantayhteys</p>

          <h3>Tietokanta</h3>

          <p>Lisää samariumille phpmyadminiin taulu ja tiedot lukemalla sql-tiedosto <a
              href="./test_games.sql">test_games.sql</a>.


<ul>
  <li>Kirjaudu cPaneliin (https://cpanel.tunnus.treok.io/) ja avaa MySQL Databases
  </li>
    <li>Tee uusi tietokanta nimeltä tunnus_sasp
  </li>
    <li>Tämän jälkeen tee uusi käyttäjä, tunnus_sasp, luo salasana Password Generatorin avulla, kopioi salasana itsellesi talteen!
  </li>
    <li>Lisää vielä tekemäsi käyttäjä tietokannalle (Add User to Database), voit antaa kaikki oikeudet (ALL PRIVILEGES).
  </li>
    <li>Avaa seuraavaksi cPanelin työkaluista phpMyAdmin, tuo sql-tiedosto tietokantaasi.</li>
</ul>


          <h3>dbfunctions.php</h3>

          <p>Tee aluksi itsellesi uusi tiedosto dbfunctions10.php demot-kansioosi

            . Tehdään aluksi funktio jonka avulla voidaan ottaa yhteys tietokantaan:</p>

<pre>/**
 * Ottaa yhteyden tietokantaan, palauttaa 
 * pdo-olion.
 * 13.2.2023/EM
 */
function connect() {
    $servername = "tunnus.treok.io";
    $username = "tunnus_sasp";
    $password = "salasana";
    //$port = 3306;
    $dbname = "tunnus_sasp";

    try {
        $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
        // set the PDO error mode to exception
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        echo "Connected successfully";
        return $conn;
    } catch(PDOException $e) {
        echo "Connection failed: " . $e->getMessage();
        die();
    }
}
</pre>



        </article>
      </div>
    </div>
  </div>
  <div class="current-section">

  </div>
</body>

</html>