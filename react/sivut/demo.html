<html lang="fi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../../style/css/style.css">

    <title>Fullstack-kehitys</title>
</head>

<body>
    <div class="wrapper">
        <header>
            <h1>Fullstack-kehitys</h1>
        </header>
        <div id="container">

            <div id="main" role="main">

                <article class="markdown-body">
<h2>React-demoja</h2>
<h3>Demo 1</h3>
<p>Tämä demo käy läpi Full Stack open-kurssin <a href="https://fullstackopen.com/osa1/reactin_alkeet" target="_blank">osan 1 kohdan Reactin alkeet</a>.</p>
<h4>Projektin luonti</h4>
<p>Tehdään Github-repon sisälle projektikansio demoille. Neljä demo tulevat kaikki tämän saman React-projektin sisälle. Avaa konsoli repon juurihakemistossa ja aja seuraava projektin luontikäsky:</p>
<pre>
npm create vite@latest demot -- --template react
</pre>
<p>Tämän jälkeen siirrytään kansioon ja käynnistetään reactin development server:</p>
<pre>
cd demot
npm install
npm run dev
</pre>
<p>Lähdekooditiedostot ovat src-kansiossa. App.jsx sisältää App-komponentin jonka sisälle teemme demojen tehtävät. Lisää alikansio components alikomponenteille.</p>
<p><img src="../kuvat/demot1.png" alt=""></p>
<p>node_modules-kansio sisältää Reactin asennettuja kirjastoja ja sitä ei haluta mukaan GitHub-repoon. Lisätään repon juurihakemistoon .gitignore-tiedosto:</p>
<pre>
node_modules
</pre>
<p>Kun olet käynnistänyt development serverin voit avata selaimessa osoitteen <a href="http://localhost:5173/" target="_blank">http://localhost:5173/</a>.</p>

<p>Muutetaan App-komponentti yksinkertaisemmaksi:</p>
<pre>
import { useState } from 'react'
import './App.css'

function App() {

  return (
    &lt;&gt;
     &lt;div className="App"&gt;
      &lt;header className="App-header"&gt;
        &lt;h1&gt;React demot&lt;/h1&gt;
      &lt;/header&gt;
    &lt;/div&gt;
    &lt;/&gt;
  )
}

export default App    
</pre>
<p>Muokkaa myös App.css-tiedostoa:</p>
<pre>
.App-header {
  background-color: white;
  color: black;
  text-align: center;
  width: 100%;
}

.App {
  width: 800px;
}

body {
  place-items: start;
}    
</pre>
<h4>Muuttujat</h4>
<p>Reactissa muuttujat esitellään JavaScriptin tapaan. Kun viittaat muuttujaan return-osassa muuttuja ympäröidään aaltosuluilla.</p>
<pre>
function App() {
  const name = "Musti";
  const age = 10;

  return (
    &lt;&gt;
     &lt;div className="App"&gt;
      &lt;header className="App-header"&gt;
        &lt;h1&gt;React demot&lt;/h1&gt;
      &lt;/header&gt;
      &lt;div className="App-body"&gt;
        &lt;h2&gt;Demo 1&lt;/h2&gt;
        &lt;p&gt;Lemmikin nimi on {name} ja se on {age} vuotta vanha.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;/&gt;
  )
}
</pre>
<h4>React-komponentti</h4>
<p>Yleensä halutaan tehdä pienempiä komponentteja joita kutsutaan esimerkiksi App.jsx-tiedostossa. Komponentti tulee tuoda (import) sitä käyttävässä komponentissa.</p>

<ul>
  <li>Tee kansio components ja lisää sinne tiedosto Pet.jsx</li>
  <li>Tallenna <a href="../kuvat/demo_pet.png">kuva</a> lemmikistä assets-kansioon.</li>
</ul>

<pre>
import imgPet from '../assets/demo_pet.png'

const Pet = () => {
    const name = "Musti";
    const age = 10;

    return (
        &lt;div className='pet'&gt;
            &lt;h3&gt;Lemmikki&lt;/h3&gt;
            &lt;p&gt;nimi: {name}&lt;/p&gt;
            &lt;p&gt;ikä: {age} vuotta&lt;/p&gt;
            &lt;img className="image" src={imgPet} alt="Kuva lemmikistä" /&gt;
        &lt;/div&gt;
    );
};

export default Pet;  
</pre>
<p>App.jsx-tiedostolla tuodaan komponentti mukaan: </p>
<pre>import Pet from './components/Pet.jsx'</pre>
<p>Kutsutaan App.jsx-tiedostolla return-osassa Pet-komponenttia:</p>
<pre>
&lt;div className="App-body"&gt;
&lt;h2&gt;Demo 1&lt;/h2&gt;
&lt;Pet /&gt;
&lt;/div&gt;  
</pre>
<h4>Tietojen välitys - props</h4>
<p><img src="../kuvat/demot1_2.png" alt=""></p>
<p>Äskeinen komponentti tulostaa aina samat tiedot. Toimivampi komponentti saisi tiedot syötteenä ja osaisi tulostaa lemmikin tiedot näkyviin. Annetaan seuravaksi Pets-komponentille parametrit eli propsit syötteenä. Muuta App.jsx-tiedostoa seuraavasti:</p>
<pre> &lt;Pet name="Musti" age="2" /&gt;</pre>
<p>Pet.jsx-tiedostossa parametri propsin avulla voidaan tulostaa lemmikin tiedot:</p>
<pre>
const Pet = (props) =&gt; {

    return (
        &lt;div className='pet'&gt;
            &lt;h3&gt;Lemmikki&lt;/h3&gt;
            &lt;p&gt;nimi: {props.name}&lt;/p&gt;
            &lt;p&gt;ikä: {props.age} vuotta&lt;/p&gt;
            &lt;img className="image" src={imgPet} alt="Kuva lemmikistä" /&gt;
        &lt;/div&gt;
    );
}; 
</pre>
<p>props on olio joka voidaan <a href="https://www.w3schools.com/react/react_es6_destructuring.asp" target="_blank">purkaa osiksi</a> aaltosulkujen avulla. Usein on selkeämpää käyttää komponentilla muuttujia kuin props-oliota:</p>
<pre>
const Pet = ({name, age}) =&gt; {

    return (
        &lt;div className='pet'&gt;
            &lt;h3&gt;Lemmikki&lt;/h3&gt;
            &lt;p&gt;nimi: {name}&lt;/p&gt;
            &lt;p&gt;ikä: {age} vuotta&lt;/p&gt;
            &lt;img className="image" src={imgPet} alt="Kuva lemmikistä" /&gt;
        &lt;/div&gt;
    );
};  
</pre>
<h4>Olio</h4>
<p>Komponentille välitettävä tieto on usein olio jossa on sisällä erilaisia muuttujia. App.jsx lähettääkin seuraavaksi komponentille olion. Määrittele ensin App.jsx-tiedostossa olio näin:</p>
<pre>
import imgPet from './assets/demo_pet.png'
const pet1 = {
  name: "Musti",
  age: 2,
  img: imgPet
}  
</pre>
<p>Lisätään tiedostoon Pet.jsx toinen komponentti PetObject. Nyt annetaan syötteenä olio.</p>
<pre>
const PetObject = ({pet}) =&gt; {
    return (
        &lt;div className='pet'&gt;
            &lt;h3&gt;{pet.name}&lt;/h3&gt;
            &lt;p&gt;ikä: {pet.age} vuotta&lt;/p&gt;
            &lt;img className="image" src={pet.img} alt="Kuva lemmikistä" /&gt;
        &lt;/div&gt;
    );
};  
</pre>
<p>Kun Pet.jsx-tiedosto sisältääkin kaksi komponenttia niin exportataan ne molemmat: </p>
<pre>export {Pet, PetObject};</pre>
<p>App.jsx-tiedostolla importataan Pet.jsx-tiedostosta kaksi komponenttia, muuta import-lausetta näin:</p>
<pre>import {Pet, PetObject} from './components/Pet.jsx'</pre>
<p>App.jsx kutsuu nyt PetObject-komponenttia pet1-oliolla:</p>
<pre>
&lt;PetObject pet={pet1} /&gt;
</pre>

<h4>Map ja taulukollinen olioita</h4>
Käytetyt kuvat (<a href="../kuvat/demo_pet.png">kuva1</a>, <a href="../kuvat/demo_pet2.png">kuva2</a>, <a href="../kuvat/demo_pet3.png">kuva3</a>)
<pre>
import imgPet from './assets/demo_pet.png'
import imgPet2 from './assets/demo_pet2.png'
import imgPet3 from './assets/demo_pet3.png'
const pet1 = {
  name: "Milo",
  age: 2,
  img: imgPet
}
const pet2 = {
  name: "Lucy",
  age: 2,
  img: imgPet
}
const pet3 = {
  name: "Bella",
  age: 3,
  img: imgPet3
}
const pet4 = {
  name: "Willow",
  age: 7,
  img: imgPet2
}
const pets = [pet1, pet2, pet3, pet4];  
</pre>

<p>Taulukon käsittelyssä </p>
<pre>
const Pets = ({pets}) =&gt; {
    return (
        &lt;div className='pets'&gt;
            {pets.map((pet, index) =&gt; (
                &lt;PetObject key={index} pet={pet} /&gt;
            ))}
        &lt;/div&gt;
    );
};</pre>

                </article>
            </div>
        </div>
    </div>
    <div class="current-section">

    </div>
</body>

</html>